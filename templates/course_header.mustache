{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template theme_ufpel/course_header

    Course header with background image, overlay, and structured course information.
    Layout: Status Badge + Metadata / Title (100%) / Students + Teachers (horizontal) / Progress (centered)

    Context variables required for this template:
    * courseimage - URL of the course image
    * courseid - ID of the course
    * coursestatus - Object with status (ongoing/finished/upcoming), label, badgeclass, tooltip
    * semester - Semester information (e.g., "2025/2")
    * coursecode - Course code (e.g., "11260030")
    * courseclass - Class/turma (e.g., "M2")
    * coursetitle - Clean course title (e.g., "LABORATÓRIO DE EDUCAÇÃO MATEMÁTICA II")
    * teachers - Array of teacher objects with id, fullname, profileurl, avatar
    * studentcount - Number of enrolled students
    * hasprogress - Boolean indicating if user is a student
    * progress - Progress object with completed, total, percentage (if hasprogress)

    Example context (json):
    {
        "courseimage": "http://example.com/course/image.jpg",
        "courseid": "42",
        "coursestatus": {
            "status": "ongoing",
            "label": "Em andamento",
            "badgeclass": "badge-success",
            "tooltip": "Início: 01/01/2025 - Término: 30/06/2025"
        },
        "semester": "2025/2",
        "coursecode": "11260030",
        "courseclass": "M2",
        "coursetitle": "LABORATÓRIO DE EDUCAÇÃO MATEMÁTICA II",
        "teachers": [...],
        "studentcount": 45,
        "hasprogress": true,
        "progress": {...}
    }
}}
<div class="ufpel-course-header" style="background-image: url('{{courseimage}}');" data-course-id="{{courseid}}">
    <div class="ufpel-course-header-hero"  style="background-image: url('{{courseimage}}');"></div>
    <div class="ufpel-course-header-overlay">
        <div class="ufpel-course-header-content">
            {{! Status Badge and Course Metadata }}
            <div class="ufpel-course-meta-top">
                <span class="ufpel-status-badge {{coursestatus.badgeclass}}" 
                      title="{{coursestatus.tooltip}}" 
                      data-toggle="tooltip" 
                      data-placement="top">
                    {{coursestatus.label}}
                </span>
                <small class="ufpel-course-metadata">
                    {{#semester}}
                    <span class="ufpel-meta-item" 
                          title="{{#str}}semester, theme_ufpel{{/str}}" 
                          data-toggle="tooltip" 
                          data-placement="top">
                        {{semester}}
                    </span>
                    {{/semester}}
                    {{#coursecode}}
                    <span class="ufpel-meta-separator">•</span>
                    <span class="ufpel-meta-item" 
                          title="{{#str}}coursecode, theme_ufpel{{/str}}" 
                          data-toggle="tooltip" 
                          data-placement="top">
                        {{coursecode}}
                    </span>
                    {{/coursecode}}
                    {{#courseclass}}
                    <span class="ufpel-meta-separator">•</span>
                    <span class="ufpel-meta-item" 
                          title="{{#str}}courseclass, theme_ufpel{{/str}}" 
                          data-toggle="tooltip" 
                          data-placement="top">
                        {{courseclass}}
                    </span>
                    {{/courseclass}}
                </small>
            </div>
            
            {{! Course Title - 100% width }}
            <h1 class="ufpel-course-title">{{coursetitle}}</h1>
            
            {{! Bottom row: Info (left 50%) and Progress (right 50%) }}
            <div class="ufpel-course-bottom-row">
                {{! Left column: Student Count and Teachers (50%) }}
                <div class="ufpel-course-left-column">
                    {{#studentcount}}
                    <div class="ufpel-info-item" 
                         title="{{#str}}participants, theme_ufpel{{/str}}" 
                         data-toggle="tooltip" 
                         data-placement="top">
                        <i class="fa fa-users" aria-hidden="true"></i>
                        <span>{{studentcount}}</span>
                    </div>
                    {{/studentcount}}
                    
                    {{#teachers}}
                    <div class="ufpel-course-teachers">
                        {{#teachers}}
                        <div class="ufpel-teacher-item">
                            <a href="{{profileurl}}" class="ufpel-teacher-link">
                                <div class="ufpel-teacher-avatar">{{{avatar}}}</div>
                                <span class="ufpel-teacher-name">{{fullname}}</span>
                            </a>
                        </div>
                        {{/teachers}}
                    </div>
                    {{/teachers}}
                </div>
                
                {{! Right column: Progress Bar (50%) }}
                {{#hasprogress}}
                {{#progress.enabled}}
                <div class="ufpel-course-right-column">
                    <div class="ufpel-course-progress">
                        <div class="ufpel-progress-container">
                            <div class="ufpel-progress-bar-container" 
                                 title="{{#str}}progress, core_completion{{/str}}" 
                                 data-toggle="tooltip" 
                                 data-placement="top">
                                <div class="ufpel-progress-bar" style="width: {{progress.percentage}}%;" role="progressbar" aria-valuenow="{{progress.percentage}}" aria-valuemin="0" aria-valuemax="100">
                                    <span class="sr-only">{{progress.percentage}}% {{#str}}complete, theme_ufpel{{/str}}</span>
                                </div>
                            </div>
                            <span class="ufpel-progress-stats" 
                                  title="{{#str}}taskscompleted, theme_ufpel{{/str}}" 
                                  data-toggle="tooltip" 
                                  data-placement="top">
                                {{progress.completed}}/{{progress.total}} ({{progress.percentage}}%)
                            </span>
                        </div>
                    </div>
                </div>
                {{/progress.enabled}}
                {{/hasprogress}}
            </div>
        </div>
    </div>
</div>

{{! Initialize Bootstrap tooltips }}
{{#js}}
require(['jquery'], function($) {
    $(document).ready(function() {
        $('[data-toggle="tooltip"]').tooltip();
    });
});
{{/js}}